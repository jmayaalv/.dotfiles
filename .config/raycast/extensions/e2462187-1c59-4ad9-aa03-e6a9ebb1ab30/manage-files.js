"use strict";var Fe=Object.create;var v=Object.defineProperty;var $e=Object.getOwnPropertyDescriptor;var be=Object.getOwnPropertyNames;var Ie=Object.getPrototypeOf,Ae=Object.prototype.hasOwnProperty;var we=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),Ne=(e,i)=>{for(var n in i)v(e,n,{get:i[n],enumerable:!0})},j=(e,i,n,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of be(i))!Ae.call(e,o)&&o!==n&&v(e,o,{get:()=>i[o],enumerable:!(t=$e(i,o))||t.enumerable});return e};var L=(e,i,n)=>(n=e!=null?Fe(Ie(e)):{},j(i||!e||!e.__esModule?v(n,"default",{value:e,enumerable:!0}):n,e)),Be=e=>j(v({},"__esModule",{value:!0}),e);var se=we(W=>{"use strict";var Ce="array",Ee="bit",ee="bits",ve="byte",te="bytes",D="",Le="exponent",xe="function",ie="iec",Re="Invalid number",Oe="Invalid rounding method",K="jedec",Me="object",ne=".",oe="round",ze="s",Ye="si",Ue="kbit",Ge="kB",re=" ",ae="string",Ke="0",Q={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function ce(e,{bits:i=!1,pad:n=!1,base:t=-1,round:o=2,locale:f=D,localeOptions:m={},separator:P=D,spacer:b=re,symbols:I={},standard:u=D,output:A=ae,fullform:Y=!1,fullforms:B=[],exponent:C=-1,roundingMethod:U=oe,precision:T=0}={}){let l=C,F=Number(e),c=[],p=0,G=D;u===Ye?(t=10,u=K):u===ie||u===K?t=2:t===2?u=ie:(t=10,u=K);let E=t===10?1e3:1024,ke=Y===!0,_=F<0,q=Math[U];if(typeof e!="bigint"&&isNaN(e))throw new TypeError(Re);if(typeof q!==xe)throw new TypeError(Oe);if(_&&(F=-F),(l===-1||isNaN(l))&&(l=Math.floor(Math.log(F)/Math.log(E)),l<0&&(l=0)),l>8&&(T>0&&(T+=8-l),l=8),A===Le)return l;if(F===0)c[0]=0,G=c[1]=Q.symbol[u][i?ee:te][l];else{p=F/(t===2?Math.pow(2,l*10):Math.pow(1e3,l)),i&&(p=p*8,p>=E&&l<8&&(p=p/E,l++));let w=Math.pow(10,l>0?o:0);c[0]=q(p*w)/w,c[0]===E&&l<8&&C===-1&&(c[0]=1,l++),G=c[1]=t===10&&l===1?i?Ue:Ge:Q.symbol[u][i?ee:te][l]}if(_&&(c[0]=-c[0]),T>0&&(c[0]=c[0].toPrecision(T)),c[1]=I[c[1]]||c[1],f===!0?c[0]=c[0].toLocaleString():f.length>0?c[0]=c[0].toLocaleString(f,m):P.length>0&&(c[0]=c[0].toString().replace(ne,P)),n&&Number.isInteger(c[0])===!1&&o>0){let w=P||ne,J=c[0].toString().split(w),H=J[1]||D,X=H.length,Te=o-X;c[0]=`${J[0]}${w}${H.padEnd(X+Te,Ke)}`}return ke&&(c[1]=B[l]?B[l]:Q.fullform[u][l]+(i?Ee:ve)+(c[0]===1?D:ze)),A===Ce?c:A===Me?{value:c[0],symbol:c[1],exponent:l,unit:G}:c.join(b)}function Qe({bits:e=!1,pad:i=!1,base:n=-1,round:t=2,locale:o=D,localeOptions:f={},separator:m=D,spacer:P=re,symbols:b={},standard:I=D,output:u=ae,fullform:A=!1,fullforms:Y=[],exponent:B=-1,roundingMethod:C=oe,precision:U=0}={}){return T=>ce(T,{bits:e,pad:i,base:n,round:t,locale:o,localeOptions:f,separator:m,spacer:P,symbols:b,standard:I,output:u,fullform:A,fullforms:Y,exponent:B,roundingMethod:C,precision:U})}W.filesize=ce;W.partial=Qe});var We={};Ne(We,{default:()=>Pe});module.exports=Be(We);var r=require("@raycast/api"),de=L(se()),$=L(require("node:fs")),g=require("node:path"),De=require("node:os"),Se=require("react");var a=require("@raycast/api");var le=L(require("node:fs")),S=require("@raycast/api"),fe=require("react");var k=require("react/jsx-runtime");function R(e){if(e.path===null||!le.default.existsSync(e.path))return(0,k.jsx)(S.Detail,{markdown:`# Error: 

The directory \`${e.path}\` does not exist. `});let[i,n]=(0,fe.useState)(()=>N(e.path)),t=(0,S.getPreferenceValues)();if(t.directoriesFirst){let o=i.filter(m=>m.type==="directory"),f=i.filter(m=>m.type!=="directory");return(0,k.jsxs)(S.List,{searchBarPlaceholder:`Search in ${e.path}/`,children:[(0,k.jsx)(S.List.Section,{title:"Directories",children:o.map(m=>x(m,()=>n(N(e.path)),t))}),(0,k.jsx)(S.List.Section,{title:"Files",children:f.map(m=>x(m,()=>n(N(e.path)),t))})]})}else return(0,k.jsx)(S.List,{searchBarPlaceholder:`Search in ${e.path}/`,children:i.map(o=>x(o,()=>n(N(e.path)),t))})}var y=require("react/jsx-runtime");function O(e){let i=e.isSymlink??!1,n=e.originalPath??"",t=`${e.fileData.path}/${e.fileData.name}`,o=`${i?"Symlink ":""}Directory`,f=encodeURIComponent(JSON.stringify({path:t})),m=`raycast://extensions/erics118/${a.environment.extensionName}/${a.environment.commandName}?context=${f}`;return(0,y.jsx)(a.List.Item,{id:t,title:e.fileData.name,subtitle:e.preferences.showFilePermissions?e.fileData.permissions:"",icon:{fileIcon:t},quickLook:{path:t,name:e.fileData.name},actions:(0,y.jsxs)(a.ActionPanel,{title:e.fileData.name,children:[(0,y.jsxs)(a.ActionPanel.Section,{children:[(0,y.jsx)(a.Action.Push,{title:`Open ${o}`,icon:a.Icon.ArrowRight,target:(0,y.jsx)(R,{path:t})}),(0,y.jsx)(a.Action.OpenWith,{path:t,onOpen:()=>(0,a.popToRoot)({clearSearchBar:!0})}),(0,y.jsx)(a.Action.ShowInFinder,{path:t,shortcut:{modifiers:["cmd"],key:"f"}}),(0,y.jsx)(a.Action.ToggleQuickLook,{title:"Quick Look",shortcut:{modifiers:["cmd"],key:"y"}}),(0,y.jsx)(a.Action.CopyToClipboard,{title:`Copy ${o} Path`,content:t+"/",shortcut:{modifiers:["cmd","shift"],key:"c"}}),i&&(0,y.jsx)(a.Action.CopyToClipboard,{title:"Copy Original Directory Path",content:n,shortcut:{modifiers:["cmd","opt"],key:"c"}})]}),(0,y.jsx)(a.ActionPanel.Section,{children:(0,y.jsx)(a.Action.CreateQuicklink,{title:`Create Quicklink to This ${o}`,quicklink:{name:`Open ${t}`,link:m}})}),(0,y.jsxs)(a.ActionPanel.Section,{children:[(0,y.jsx)(a.Action.Push,{target:(0,y.jsx)(M,{filePath:t,refresh:e.refresh,typeName:o}),title:`RenameForm ${o}`,shortcut:{modifiers:["cmd"],key:"r"},icon:a.Icon.Pencil}),(0,y.jsx)(a.Action.Trash,{title:"Move to Trash",shortcut:e.preferences.standardShortcuts?{modifiers:["ctrl"],key:"x"}:{modifiers:["cmd"],key:"t"},paths:t,onTrash:()=>{(0,a.showToast)(a.Toast.Style.Success,"Moved to Trash",`${o}: ${t}`),e.refresh()}}),e.preferences.showDeleteActions&&(0,y.jsx)(a.Action,{title:`Delete ${o}`,icon:a.Icon.Eraser,style:a.Action.Style.Destructive,shortcut:e.preferences.standardShortcuts?{modifiers:["ctrl","shift"],key:"x"}:{modifiers:["cmd"],key:"d"},onAction:()=>me(t,e.fileData.name,e.refresh)})]})]})})}var s=require("@raycast/api");var h=require("react/jsx-runtime");function z(e){let i=e.isSymlink??!1,n=e.originalPath??"",t=`${e.fileData.path}/${e.fileData.name}`,o=`${i?"Symlink ":""}File`;return(0,h.jsx)(s.List.Item,{id:t,title:e.fileData.name,icon:{fileIcon:t},quickLook:{path:t,name:e.fileData.name},subtitle:e.preferences.showFilePermissions?e.fileData.permissions:"",accessories:e.preferences.showFileSize?[{icon:s.Icon.HardDrive,text:he(e.fileData)}]:[],actions:(0,h.jsxs)(s.ActionPanel,{title:e.fileData.name,children:[(0,h.jsxs)(s.ActionPanel.Section,{children:[(0,h.jsx)(s.Action.Open,{title:`Open ${o}`,target:t}),(0,h.jsx)(s.Action.OpenWith,{path:t}),(0,h.jsx)(s.Action.ShowInFinder,{path:t,shortcut:{modifiers:["cmd"],key:"f"}}),(0,h.jsx)(s.Action.ToggleQuickLook,{title:"Quick Look",shortcut:{modifiers:["cmd"],key:"y"}}),(0,h.jsx)(s.Action.CopyToClipboard,{title:`Copy ${o} Path`,content:t,shortcut:{modifiers:["cmd","shift"],key:"c"}}),i&&(0,h.jsx)(s.Action.CopyToClipboard,{title:"Copy Original File Path",content:n,shortcut:{modifiers:["cmd","opt"],key:"c"}})]}),(0,h.jsxs)(s.ActionPanel.Section,{children:[(0,h.jsx)(s.Action.Push,{target:(0,h.jsx)(M,{filePath:t,refresh:e.refresh,typeName:o}),title:`RenameForm ${o}`,icon:s.Icon.Pencil,shortcut:{modifiers:["cmd"],key:"r"}}),(0,h.jsx)(s.Action.Trash,{title:"Move to Trash",shortcut:e.preferences.standardShortcuts?{modifiers:["ctrl"],key:"x"}:{modifiers:["cmd"],key:"t"},paths:t,onTrash:()=>{(0,s.showToast)(s.Toast.Style.Success,"Moved to Trash",`File: ${t}`),e.refresh()}}),e.preferences.showDeleteActions&&(0,h.jsx)(s.Action,{title:`Delete ${o}`,icon:s.Icon.Eraser,style:s.Action.Style.Destructive,shortcut:e.preferences.standardShortcuts?{modifiers:["ctrl","shift"],key:"x"}:{modifiers:["cmd"],key:"d"},onAction:()=>ye(t,e.fileData.name,e.refresh)})]})]})},t)}var Z=L(require("node:fs"));var V=require("react/jsx-runtime");function ue(e){let i=`${e.fileData.path}/${e.fileData.name}`,n=Z.default.readlinkSync(i),t=n.startsWith("/")?n:`${e.fileData.path}/${n}`;return Z.default.lstatSync(t,{throwIfNoEntry:!1})?.isDirectory()??!1?(0,V.jsx)(O,{fileData:e.fileData,refresh:e.refresh,isSymlink:!0,originalPath:t,preferences:e.preferences}):(0,V.jsx)(z,{fileData:e.fileData,refresh:e.refresh,isSymlink:!0,originalPath:t,preferences:e.preferences})}var d=require("react/jsx-runtime");async function ye(e,i,n){let t={title:"Permanently Delete File?",message:`Are you sure you want to delete ${i}? This action cannot be undone.`,icon:r.Icon.Eraser,primaryAction:{title:"Delete",style:r.Alert.ActionStyle.Destructive,onAction:async()=>{$.default.rmSync(e),n(),(0,r.showToast)(r.Toast.Style.Success,"File Deleted",`${i}`)}}};await(0,r.confirmAlert)(t)}async function me(e,i,n){let t={title:"Permanently Delete Directory?",message:`Are you sure you want to delete ${i}? This action cannot be undone.`,icon:r.Icon.Eraser,primaryAction:{title:"Delete",style:r.Alert.ActionStyle.Destructive,onAction:async()=>{$.default.rmdirSync(e),n(),(0,r.showToast)(r.Toast.Style.Success,"Directory Deleted",`${i}`)}}};await(0,r.confirmAlert)(t)}function he(e){return(0,de.filesize)(e.size,{round:0,spacer:""})}function ge(){let{startDirectory:e}=(0,r.getPreferenceValues)();return e.startsWith("~")&&(e=e.replace("~",(0,De.homedir)())),(0,g.resolve)(e)}function x(e,i,n){let t=`${e.path}/${e.name}`;if(e.type==="directory")return(0,d.jsx)(O,{fileData:e,refresh:i,preferences:n},t);if(e.type==="file")return(0,d.jsx)(z,{fileData:e,refresh:i,preferences:n},t);if(e.type==="symlink")return(0,d.jsx)(ue,{fileData:e,refresh:i,preferences:n},t);(0,r.showToast)(r.Toast.Style.Failure,"Unsupported file type",`File type: ${e.type}`)}function N(e){let i=(0,r.getPreferenceValues)(),n=$.default.readdirSync(e);i.showDots||(n=n.filter(o=>!o.startsWith("."))),i.caseSensitive||(n=n.sort((o,f)=>o.toLowerCase()<f.toLowerCase()?-1:o.toLowerCase()>f.toLowerCase()?1:0));let t=[];for(let o of n){let f=$.default.lstatSync(`${e}/${o}`),m="other";if(f.isDirectory()&&(m="directory"),f.isFile()&&(m="file"),f.isSymbolicLink()&&(m="symlink"),m==="other")continue;let P=(f.mode&parseInt("777",8)).toString(8),b=f.size,I={type:m,name:o,size:b,permissions:P,path:e};t.push(I)}return t}function M(e){let[i,n]=(0,Se.useState)((0,g.basename)(e.filePath)),{pop:t}=(0,r.useNavigation)();function o(){let f=`${(0,g.dirname)(e.filePath)}/${i}`;e.filePath!==f&&($.default.renameSync(e.filePath,f),(0,r.showToast)(r.Toast.Style.Success,`${e.typeName} Renamed`,`${(0,g.basename)(e.filePath)} -> ${i}`),e.refresh(),t())}return(0,d.jsx)(r.Form,{navigationTitle:(0,g.basename)(e.filePath),actions:(0,d.jsxs)(r.ActionPanel,{children:[(0,d.jsx)(r.Action,{title:`RenameForm ${e.typeName}`,onAction:o,icon:r.Icon.Pencil}),(0,d.jsx)(r.Action,{title:"Cancel",shortcut:{modifiers:["cmd"],key:"."},onAction:t,icon:r.Icon.Undo})]}),children:(0,d.jsx)(r.Form.TextField,{id:"itemName",title:`RenameForm ${e.typeName}`,placeholder:"Enter new name",value:i,onChange:n})})}var pe=require("react/jsx-runtime");function Pe(e){let i=e.launchContext?.path??ge();return(0,pe.jsx)(R,{path:i})}
/*! Bundled license information:

filesize/dist/filesize.cjs:
  (**
   * filesize
   *
   * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
   * @license BSD-3-Clause
   * @version 10.1.0
   *)
*/
